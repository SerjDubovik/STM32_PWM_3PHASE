#include "stm32f10x.h"
#include "modbus.h"
#include "GPIO.h"
#include "pwm.h"



#define ADC1_DR_Address    				((u32)0x40012400+0x4c)		// Адрес регистра результата преобразования АЦП
#define DMA_BUFF_SIZE 					200							// Размер буфера


unsigned short	array_mb[100]			= {};						// массив для хранения принятых/переданных слов


unsigned short dma_adc[DMA_BUFF_SIZE] 	= {}; 						// буферный массив для приёма данных из ацп через дма
unsigned long adc_buf[5] = {}; 										// буферный массив для усреднения





int main(void)
{


	init_GPIO();
    init_modbus();
    init_pwm();




	for(;;)
	{



		array_mb[8]++;

		Modbus_slave();

	} // скобка бесконечного цикла
} // скобка мейна
